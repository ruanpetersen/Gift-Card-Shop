{"version":3,"file":"reactjs-popup.js","sources":["../src/Utils.js","../src/popup.css.js","../src/Popup.js"],"sourcesContent":["/* Algo to calculate position \n  1. center position for popup content : the center of the trigger will be the center of the content content\n      so the popup content position will be like this :\n      top => the y of the center for the trigger element : trigger.top + trigger.height/2\n      left => the x of the center for the trigger element : trigger.left + trigger.width/2\n\n  2. translate position according to the first  position attribute  passed  in the function argument \n      for example :\n        position = 'left top'\n        we need to handle the first argument in the position: 'left' => that's mean we need to translate the popup content according to the X axis by - content.width/2\n      \n  3.translate position according to the first  position attribute  passed  in the function argument \n    for example :\n      position = 'left top'\n      the second argument 'top' => translate popup content by + content.height*4/5\n\n*/\n\nexport default function calculatePosition(\n  triggerBounding,\n  ContentBounding,\n  position,\n  arrow,\n  offset\n) {\n  const style = {};\n  const margin = arrow ? 8 : 0;\n  const MarginX = margin + offset.offsetX;\n  const MarginY = margin + offset.offsetY;\n  const args = position.split(\" \");\n  // the step N 1 : center the popup content => ok\n  const CenterTop = triggerBounding.top + triggerBounding.height / 2;\n  const CenterLeft = triggerBounding.left + triggerBounding.width / 2;\n  const { height, width } = ContentBounding;\n  let top = CenterTop - height / 2;\n  let left = CenterLeft - width / 2;\n  let transform = \"\";\n  let arrowTop = \"0%\";\n  let arrowLeft = \"0%\";\n  // the  step N 2 : => ok\n  switch (args[0]) {\n    case \"top\":\n      top -= height / 2 + triggerBounding.height / 2 + MarginY;\n      transform = `rotate(45deg)`;\n      arrowTop = \"100%\";\n      arrowLeft = \"50%\";\n      break;\n    case \"bottom\":\n      top += height / 2 + triggerBounding.height / 2 + MarginY;\n      transform = `rotate(225deg)`;\n      arrowLeft = \"50%\";\n      break;\n    case \"left\":\n      left -= width / 2 + triggerBounding.width / 2 + MarginX;\n      transform = ` rotate(-45deg)`;\n      arrowLeft = \"100%\";\n      arrowTop = \"50%\";\n      break;\n    case \"right\":\n      left += width / 2 + triggerBounding.width / 2 + MarginX;\n      transform = `rotate(135deg)`;\n      arrowTop = \"50%\";\n\n      break;\n  }\n  switch (args[1]) {\n    case \"top\":\n      top = triggerBounding.top;\n      arrowTop = triggerBounding.height / 2 + \"px\";\n      break;\n    case \"bottom\":\n      top = triggerBounding.top - height + triggerBounding.height;\n      arrowTop = height - triggerBounding.height / 2 + \"px\";\n      break;\n    case \"left\":\n      left = triggerBounding.left;\n      arrowLeft = triggerBounding.width / 2 + \"px\";\n      break;\n    case \"right\":\n      left = triggerBounding.left - width + triggerBounding.width;\n      arrowLeft = width - triggerBounding.width / 2 + \"px\";\n      break;\n  }\n\n  return { top, left, transform, arrowLeft, arrowTop };\n}\n","export default {\n  popupContent: {\n    tooltip: {\n      position: \"absolute\",\n      zIndex: \"2\",\n      width: \"200px\",\n      background: `rgb(255, 255, 255)`,\n      border: `1px solid rgb(187, 187, 187)`,\n      boxShadow: `rgba(0, 0, 0, 0.2) 0px 1px 3px`,\n      padding: \"5px\"\n    },\n    modal: {\n      position: \"relative\",\n      background: `rgb(255, 255, 255)`,\n      width: \"50%\",\n      margin: \"auto\",\n      border: `1px solid rgb(187, 187, 187)`,\n      padding: \"5px\"\n    }\n  },\n  popupArrow: {\n    height: \"10px\",\n    width: \"10px\",\n    position: \"absolute\",\n    background: \"rgb(255, 255, 255)\",\n    transform: \"rotate(45deg)\",\n    margin: \"-5px\",\n    zIndex: \"-1\",\n    boxShadow: \"rgba(0, 0, 0, 0.2) 1px 1px 1px\"\n  },\n  overlay: {\n    tooltip: {\n      position: \"fixed\",\n      top: \"0\",\n      bottom: \"0\",\n      left: \"0\",\n      right: \"0\"\n    },\n    modal: {\n      position: \"fixed\",\n      top: \"0\",\n      bottom: \"0\",\n      left: \"0\",\n      right: \"0\",\n      background: `rgba(0, 0, 0,0.5)`,\n      display: \"flex\",\n      zIndex: \"999\"\n    }\n  }\n};\n","import React from \"react\";\nimport { findDOMNode } from \"react-dom\";\nimport calculatePosition from \"./Utils\";\n\nimport styles from \"./popup.css.js\";\n\nexport default class Popup extends React.PureComponent {\n  static defaultProps = {\n    children: () => <span> Your Content Here !!</span>,\n    trigger: null,\n    onOpen: () => {},\n    onClose: () => {},\n    defaultOpen: false,\n    open: false,\n    closeOnDocumentClick: false,\n    closeOnEscape: true,\n    on: [\"click\"],\n    contentStyle: {},\n    arrowStyle: {},\n    overlayStyle: {},\n    className: \"\",\n    position: \"bottom center\",\n    modal: false,\n    lockScroll: true,\n    arrow: true,\n    offsetX: 0,\n    offsetY: 0,\n    mouseEnterDelay: 100,\n    mouseLeaveDelay: 100\n  };\n  state = {\n    isOpen: this.props.open || this.props.defaultOpen,\n    modal: this.props.modal ? true : !this.props.trigger\n    // we create this modal state because the popup can't be a tooltip if the trigger prop doesn't existe\n  };\n\n  constructor(props) {\n    super(props);\n    this.setTriggerRef = r => (this.TriggerEl = r);\n    this.setContentRef = r => (this.ContentEl = r);\n    this.setArrowRef = r => (this.ArrowEl = r);\n    this.setHelperRef = r => (this.HelperEl = r);\n    this.timeOut = 0;\n  }\n\n  componentDidMount() {\n    const { closeOnEscape, defaultOpen } = this.props;\n    if (defaultOpen) this.setPosition();\n    if (closeOnEscape) {\n      window.addEventListener(\"keyup\", e => {\n        if (e.key === \"Escape\") this.closePopup();\n      });\n    }\n  }\n  componentWillReceiveProps(nextProps) {\n    if (this.props.open === nextProps.open) return;\n    if (nextProps.open) this.openPopup();\n    else this.closePopup();\n  }\n  componentWillUnmount() {\n    // kill any function to execute if the component is unmounted\n    clearTimeout(this.timeOut);\n  }\n\n  lockScroll = () => {\n    if (this.state.modal && this.props.lockScroll)\n      document.getElementsByTagName(\"body\")[0].style.overflow = \"hidden\";\n  };\n  resetScroll = () => {\n    if (this.state.modal && this.props.lockScroll)\n      document.getElementsByTagName(\"body\")[0].style.overflow = \"auto\";\n  };\n\n  togglePopup = () => {\n    if (this.state.isOpen) this.closePopup();\n    else this.openPopup();\n  };\n  openPopup = () => {\n    if (this.state.isOpen) return;\n    this.setState({ isOpen: true }, () => {\n      this.setPosition();\n      this.props.onOpen();\n      this.lockScroll();\n    });\n  };\n  closePopup = () => {\n    if (!this.state.isOpen) return;\n    this.setState({ isOpen: false }, () => {\n      this.props.onClose();\n      this.resetScroll();\n    });\n  };\n  onMouseEnter = () => {\n    clearTimeout(this.timeOut);\n    const { mouseEnterDelay } = this.props;\n    this.timeOut = setTimeout(() => this.openPopup(), mouseEnterDelay);\n  };\n  onMouseLeave = () => {\n    clearTimeout(this.timeOut);\n    const { mouseLeaveDelay } = this.props;\n    this.timeOut = setTimeout(() => this.closePopup(), mouseLeaveDelay);\n  };\n\n  setPosition = () => {\n    const { arrow, position, offsetX, offsetY } = this.props;\n    const { modal } = this.state;\n    if (modal) return;\n    const helper = this.HelperEl.getBoundingClientRect();\n    const trigger = this.TriggerEl.getBoundingClientRect();\n    const content = this.ContentEl.getBoundingClientRect();\n    const cords = calculatePosition(trigger, content, position, arrow, {\n      offsetX,\n      offsetY\n    });\n    this.ContentEl.style.top = cords.top - helper.top + \"px\";\n    this.ContentEl.style.left = cords.left - helper.left + \"px\";\n    if (arrow) {\n      this.ArrowEl.style[\"transform\"] = cords.transform;\n      this.ArrowEl.style[\"-ms-transform\"] = cords.transform;\n      this.ArrowEl.style[\"-webkit-transform\"] = cords.transform;\n      this.ArrowEl.style.top = cords.arrowTop;\n      this.ArrowEl.style.left = cords.arrowLeft;\n    }\n    if (\n      window\n        .getComputedStyle(this.TriggerEl, null)\n        .getPropertyValue(\"position\") == \"static\" ||\n      window\n        .getComputedStyle(this.TriggerEl, null)\n        .getPropertyValue(\"position\") == \"\"\n    )\n      this.TriggerEl.style.position = \"relative\";\n  };\n\n  addWarperAction = () => {\n    const { contentStyle, className, on } = this.props;\n    const { modal } = this.state;\n    const popupContentStyle = modal\n      ? styles.popupContent.modal\n      : styles.popupContent.tooltip;\n\n    const childrenElementProps = {\n      className: `popup-content ${className}`,\n      style: Object.assign({}, popupContentStyle, contentStyle),\n      ref: this.setContentRef,\n      onClick: e => {\n        e.stopPropagation();\n      }\n    };\n    if (!modal && on.includes(\"hover\")) {\n      childrenElementProps.onMouseEnter = this.onMouseEnter;\n      childrenElementProps.onMouseLeave = this.onMouseLeave;\n    }\n    return childrenElementProps;\n  };\n  renderTrigger = () => {\n    const triggerProps = { key: \"T\" };\n    const { on, trigger } = this.props;\n    const onAsArray = Array.isArray(on) ? on : [on];\n    for (let i = 0, len = onAsArray.length; i < len; i++) {\n      switch (onAsArray[i]) {\n        case \"click\":\n          triggerProps.onClick = this.togglePopup;\n          break;\n        case \"hover\":\n          triggerProps.onMouseEnter = this.onMouseEnter;\n          triggerProps.onMouseLeave = this.onMouseLeave;\n        case \"focus\":\n          triggerProps.onFocus = this.onMouseEnter;\n          break;\n      }\n    }\n\n    if (typeof trigger === \"function\")\n      return React.cloneElement(trigger(this.state.isOpen), triggerProps);\n\n    return React.cloneElement(trigger, triggerProps);\n  };\n\n  renderContent = () => {\n    const { arrow, arrowStyle } = this.props;\n    const { modal } = this.state;\n    return (\n      <div {...this.addWarperAction()} key=\"C\">\n        {arrow &&\n          !modal && (\n            <div\n              ref={this.setArrowRef}\n              style={Object.assign({}, styles.popupArrow, arrowStyle)}\n            />\n          )}\n        {typeof this.props.children === \"function\"\n          ? this.props.children(this.closePopup, this.state.isOpen)\n          : this.props.children}\n      </div>\n    );\n  };\n\n  render() {\n    const { overlayStyle, closeOnDocumentClick } = this.props;\n    const { modal } = this.state;\n    const ovStyle = modal ? styles.overlay.modal : styles.overlay.tooltip;\n    return [\n      this.state.isOpen && <div\n        key=\"H\"\n        style={{ position: \"absolute\", top: \"0px\", left: \"0px\" }}\n        ref={this.setHelperRef}\n      />,\n      this.state.isOpen && (\n        <div\n          key=\"O\"\n          className=\"popup-overlay\"\n          style={Object.assign({}, ovStyle, overlayStyle)}\n          onClick={closeOnDocumentClick ? this.closePopup : undefined}\n        >\n          {modal && this.renderContent()}\n        </div>\n      ),\n      this.state.isOpen && !modal && this.renderContent(),\n      !!this.props.trigger && (\n        <Ref innerRef={this.setTriggerRef} key=\"R\">\n          {this.renderTrigger()}\n        </Ref>\n      )\n    ];\n  }\n}\n\nif (process.env.NODE_ENV !== \"production\") {\n  const PropTypes = require(\"prop-types\");\n\n  Popup.propTypes = {\n    arrowStyle: PropTypes.object,\n    contentStyle: PropTypes.object,\n    overlayStyle: PropTypes.object,\n    className: PropTypes.string,\n    modal: PropTypes.bool,\n    closeOnDocumentClick: PropTypes.bool,\n    lockScroll: PropTypes.bool,\n    offsetX: PropTypes.number,\n    offsetY: PropTypes.number,\n    mouseEnterDelay: PropTypes.number,\n    mouseLeaveDelay: PropTypes.number,\n    onOpen: PropTypes.func,\n    onClose: PropTypes.func,\n    open: PropTypes.bool,\n    defaultOpen: PropTypes.bool,\n    trigger: PropTypes.oneOfType([PropTypes.func, PropTypes.element]), // for uncontrolled component we don't need the trigger Element\n    on: PropTypes.oneOfType([\n      PropTypes.oneOf([\"hover\", \"click\", \"focus\"]),\n      PropTypes.arrayOf(PropTypes.oneOf([\"hover\", \"click\", \"focus\"]))\n    ]),\n    children: PropTypes.oneOfType([\n      PropTypes.func,\n      PropTypes.element,\n      PropTypes.string\n    ]).isRequired,\n    position: PropTypes.oneOf([\n      \"top left\",\n      \"top center\",\n      \"top right\",\n      \"bottom left\",\n      \"bottom center\",\n      \"bottom right\",\n      \"right top\",\n      \"right center\",\n      \"right bottom\",\n      \"left top\",\n      \"left center\",\n      \"left bottom\"\n    ])\n  };\n}\n\nclass Ref extends React.PureComponent {\n  constructor(props) {\n    super(props);\n  }\n  componentDidMount() {\n    const { innerRef } = this.props;\n    if (innerRef) innerRef(findDOMNode(this));\n  }\n  render() {\n    const { children } = this.props;\n    return React.Children.only(children);\n  }\n}\n"],"names":["calculatePosition","triggerBounding","ContentBounding","position","arrow","offset","margin","MarginX","offsetX","MarginY","offsetY","args","split","CenterTop","top","height","CenterLeft","left","width","transform","arrowTop","arrowLeft","Popup","props","state","open","defaultOpen","modal","trigger","lockScroll","document","getElementsByTagName","style","overflow","resetScroll","togglePopup","isOpen","closePopup","openPopup","setState","setPosition","onOpen","onClose","onMouseEnter","timeOut","mouseEnterDelay","setTimeout","onMouseLeave","mouseLeaveDelay","helper","HelperEl","getBoundingClientRect","TriggerEl","content","ContentEl","cords","ArrowEl","window","getComputedStyle","getPropertyValue","addWarperAction","contentStyle","className","on","popupContentStyle","styles","popupContent","tooltip","childrenElementProps","Object","assign","setContentRef","stopPropagation","includes","renderTrigger","triggerProps","key","onAsArray","Array","isArray","i","len","length","onClick","onFocus","React","cloneElement","renderContent","arrowStyle","setArrowRef","popupArrow","children","setTriggerRef","r","setHelperRef","closeOnEscape","addEventListener","e","nextProps","overlayStyle","closeOnDocumentClick","ovStyle","overlay","undefined","PureComponent","defaultProps","PropTypes","require","propTypes","object","string","bool","number","func","oneOfType","element","oneOf","arrayOf","isRequired","Ref","innerRef","findDOMNode","Children","only"],"mappings":"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"}